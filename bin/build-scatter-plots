#!/usr/bin/env python
# vim: set softtabstop=2 ts=2 sw=2 expandtab: 

import MySQLdb
import numpy as np
import matplotlib.pyplot as plt

archiedb=MySQLdb.connect(host='localhost',user='root',passwd='bob123',db='archie')

levels=archiedb.cursor()
levels.execute("""SELECT `uid`,`northing`,`easting` FROM `level` WHERE `northing`>0 AND `easting`>0""")

level=levels.fetchone()
while level is not None:
  cursor=archiedb.cursor()
  ## Hardcoded Level for now
  cursor.execute("""SELECT `northing`,`easting`,`elevation` FROM `record` WHERE `level`='%s' AND (`northing`>0 AND `easting`>0 AND `elevation`>0)""",level[0])

  # Easting on the XY plot
  est = ();
  # Northing on the XY plot
  nor = ();
  # Elevation (Y) / Easting (X)
  elv = ();

  print "Level ", level[0]
  cords = cursor.fetchone()
  while cords is not None:
    est = est + (cords[1],)
    nor = nor + (cords[0],)
    elv = elv + (cords[2],)
  
    cords = cursor.fetchone()
  print "EST",nor
  level = levels.fetchone()
#N = 50
#x = np.random.rand(N)
#y = np.random.rand(N)
#colors = np.random.rand(N)
#area = np.pi * (15 * np.random.rand(N))**2 # 0 to 15 point radiuses
# Scatter ( X, Y, )
#plt.title('Level 14 (X) Easting / (Y) Northing',weight='bold')
#plt.scatter(est, nor,marker='x')
#plt.show()
#plt.savefig('estnor.png')
#plt.scatter(est,elv,marker='x')
#plt.savefig('estelv.png')
#plt.scatter(nor,elv,marker='x')
#plt.savefig('norelv.png')
##
